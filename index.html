<!DOCTYPE html>

<!--    ____   _____   ____      _____                 __                    -->
<!--   / ___) |  ___) |  _ \    / ____)               (__)             _     -->
<!--  | |     | |___  | | \ \  | (___     ____   ___   __    ____    _| |_   -->
<!--  | |     |  ___) | |  ) )  \___ \   / ___) |  _) |  |  |  _ \  |_   _)  -->
<!--  | |___  | |     | |_/ /   ____) ) | |___  | /   |  |  | |_) )   | |    -->
<!--   \____) |_|     |____/   |_____/   \____) |/    |__|  |  __/    | |    -->
<!--                                                        | |       | |    -->
<!--                                                        |_|       | |_   -->
<!--   Website:  www.cfdscript.com                                    \ __\  -->

<html>
  <head>
    <title>CFDScript: a JavaScript library for solving Partial Differential Equations</title>
    <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="keywords" content="finite elements, fem, galerkin, cfd, computational mechanics, javascript">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <style type="text/css">
      body { margin: auto; padding: 25px; font-family: helvetica, sans-serif; font-size: 90%; }
      h1, h2, h3, h4, h5, h6 { background: none; font-weight: normal; margin: 0; padding-top: 0.4em; padding-bottom: 0.2em; width: auto; }
      h1 { font-size: 150%; margin-bottom: 0.4em; line-height: 1.2em; }
      h1.top{ color: #555; border-bottom: 1px solid #aaa; }
      #banner { float: right; width: 180px; padding-left: 1.5em; padding-bottom: 1.5em; }
      #banner img { width: 180px; margin-bottom: 1.5ex; box-shadow: 0px 1px 4px #999; }
      p { margin: 1em 0; } 
      #menu { list-style: none; margin: 1em 0; padding: 0; }
      #menu li { display: inline-block; margin-right: 1em; }
      #menu li a { color: #333; font-weight: bold; text-decoration: none; }
      #menu li a:hover { color: #555; }
      img.title { height: 1em; }
      pre { background-color: #f2f2f2; width: fit-content; margin: 0; padding: 10; overflow-x: auto; }
    </style>
    
    <!-- Import the run_prettify.js library for JavaScript code coloring -->
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script> <!-- depreciated library -->
  </head>

  <body>
    <h1 class="top">CFDScript&nbsp;<img class="title"
      src="./images/favicon.ico" alt="">
    </h1>
    
    <div id="banner">
      <img src="./images/example1.png" alt="">
    </div>
    
    <h1>A JavaScript library for solving Partial Differential Equations (PDE) using the Finite Element Method (FEM)</h1>

    <ul id="menu">
      <li><a href="#download">Download</a></li>
      <li><a href="#documentation">Documentation</a></li>
      <li><a href="#licensing">Licensing</a></li>
    </ul>

    <p>
      CFDScript is a JavaScript library that is designed to solve Partial Differential Equations (PDE) using the Finite Element Method (FEM). 
      It enables the creation and running of browser-based simulations for physics and engineering problems. 
      Visualization tools are also provided by CFDScript to display the results of simulations.
    </p>
    
    <h2 id="download"><a name="Download"></a>Download</h2>

    <p>
      CFDScript is currently under development with continuous addition of new features and improvements. 
      The latest version of CFDScript can be downloaded from the Git repository: <a href="https://github.com/CFDScript/CFDScript" target="_blank">https://github.com/CFDScript/CFDScript</a>.
    </p>

    <h2 id="documentation"><a name="Documentation"></a>Documentation</h2>

    <h3>Usage example (Heat transfer on a 2D solid)</h3>

    <p>
      A demonstration is provided below on how to utilize the CFDScript library for addressing a stationary heat transfer problem on a 2D rectangular domain. 
      The following scripts should be included in the HTML page. 
      The initial step involves the importation of the <a href="https://mathjs.org/" target="_blank">Math.js</a> and <a href="https://plotly.com/javascript/" target="_blank">Plotly.js</a> libraries, which are essential for solving the system of equations and visualizing the solution.
    </p>
    <pre class="prettyprint">
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/5.0.0/math.min.js">&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.27.0/plotly.min.js">&lt;/script&gt;</pre>
    <p>
      Following this, various problem parameters, such as the number of elements, domain boundaries, and boundary conditions, are defined using external <a href="https://www.w3schools.com/js/js_json_intro.asp" target="_blank">JSON</a> files. 
      The first JSON file is the computational mesh configuration file (compuMesh.json):
    </p>
    <pre class="prettyprint">
{
  "nex": 8,
  "ney": 4,
  "xlast": 4,
  "ylast": 2
}</pre>
    <p>
      In this example, the parameters nex and ney represent the number of elements along the x-axis and y-axis, respectively. 
      Additionally, xlast and ylast denote the final x-coordinate and y-coordinate of the mesh, respectively. 
      The second essential JSON file is the boundary conditions configuration file (boundCond.json).  
      Boundary conditions can be specified as Dirichlet, Robin, or Neumann types.
      The Dirichlet condition sets a constant temperature value, while the Robin condition describes a convective heat transfer scenario, allowing users to define a custom heat transfer coefficient and an external temperature. 
      The Neumann boundary condition represents a zero-flux type.
      The boundary conditions configuration file is structured as follows:
    </p>
    <pre class="prettyprint">
{
  "topBound": ["robin", "dummy"],
  "bottomBound": ["dirichlet", 200.0],
  "leftBound": ["neumann", "dummy"],
  "rightBound": ["dirichlet", 200.0],
  "robinHeatTranfCoeff": 1,
  "robinExtTemp": 20
}</pre>
    <p>
      In the provided example, the second argument for a Dirichlet boundary condition corresponds to the constant temperature value. 
      For a Robin boundary condition, the parameter robinHeatTranfCoeff represents the heat transfer coefficient, and robinExtTemp indicates the external temperature.
      These JSON files are fetched using the following script:
    </p>
    <pre class="prettyprint">
&lt;script&gt;
    let compuMesh, boundCond;
    // Function to fetch and parse JSON files
    function fetchJSON(url) {
      return fetch(url)
        .then(response => response.json());
    }
    // Fetch all JSON files asynchronously
    Promise.all([
      fetchJSON('./compuMesh.json'), // Computational mesh configuration file
      fetchJSON('./boundCond.json') // Boundary conditions configuration file
    ]).then(([compuMeshData, boundCondData]) => {
      compuMesh = compuMeshData;
      boundCond = boundCondData;
    });
&lt;/script&gt;</pre>
    <p>
      Subsequently, the solidHeatScript solver, a module of the CFDScript library, is utilized. 
      This solver implements the Finite Element Method for heat conduction problems. 
      The solver accepts the number of elements, domain dimensions, and boundary conditions as inputs and returns the grid points (axpt, aypt) and the solution vector (u) as outputs. 
      Finally, the solution is visualized in the form of a contour plot.
      The following script demonstrates these steps:
    </p>
    <pre class="prettyprint">
&lt;script type="module"&gt;
// Import the CFDscript library
import { CFDScript } from 'https://cfdscript.github.io/CFDScript/src/CFDScript.js';
import { plotSol2D } from 'https://cfdscript.github.io/CFDScript/src/plotSolScript.js';
import { chkSolidHeatBoundCond, CFDScriptVersion } from 'https://cfdscript.github.io/CFDScript/src/auxFunScript.js';

window.addEventListener('DOMContentLoaded', (event) => {
  CFDScriptVersion() // Print CFDScript version
  chkSolidHeatBoundCond(boundCond); // Check boundary conditions
  let { u, nx, ny, axpt, aypt } = CFDScript('solidHeatScript', compuMesh, boundCond) // Assembly matrices and solve the system of equations
  plotSol2D(u, nx, ny, axpt, aypt); // Visualise the solution
});
&lt;/script&gt;</pre>
    <p>
      To display the plotted results, an HTML container element is also required on the page.
    </p>
    <pre class="prettyprint">
&lt;div id="plot">&lt;/div&gt</pre>
    
    <p>
      For a comprehensive understanding of the heat transfer problem and a demonstration of the provided code, please visit the <a href="https://www.cfdscript.com/exampleHeatTrasnfer.html" target="_blank">example page</a>. 
      All issues and feedback should be directed to the following GitHub repository: <a href="https://github.com/CFDScript/CFDScript/issues" target="_blank">https://github.com/CFDScript/CFDScript/issues</a>.
    </p>
    <h2 id="licensing"><a name="Licensing"></a>Licensing</h2>
    <p>
      CFDScript is distributed under the terms of the <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank">GNU General Public License version 3</a>. Copyright <span id="currentYear"></span> CFDScript.
    </p>
  
    <script>
      document.getElementById("currentYear").innerHTML = new Date().getFullYear();
    </script>
  
  </body>
</html>
